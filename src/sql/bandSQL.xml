<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>
<sqlMap>

	<select id="band_selectLastId" resultClass="int">
		select max(band_id) from t_band
	</select>
	
	<select id="band_select" resultClass="trip.band.BandDTO">
		select * from t_band where band_range > 0
	</select>
	
	<select id="band_view" resultClass="trip.band.BandDTO" parameterClass="trip.band.BandDTO">
		select * from t_band where band_id = #band_id#
	</select>
	
	<select id="band_content" resultClass="trip.band.boardDTO" parameterClass="int">
		select * from t_band_board_$band_id$
	</select>
	
<!-- =============================================================================== -->
	
	<update id="band_imgUpload" parameterClass="trip.band.BandDTO">
		update t_band set band_img = #band_img# where band_id = #band_id#
	</update>

<!-- =============================================================================== -->

	<insert id="band_create" parameterClass="trip.band.BandDTO">
		insert into t_band(band_id, band_name, band_intro, band_range, band_reg) values(t_band_seq.NEXTVAL, #band_name#, #band_intro#, #band_range#, sysdate)
	</insert><!-- band 리더 추가 해야됨 -->
	
	<insert id="band_create_table_board" parameterClass="int">
		create table t_band_board_$band_id$(band_board_num number primary key, band_board_notice number default 0, band_board_writer varchar2(100), band_board_img varchar2(1000), band_board_content varchar2(2000), band_board_readcount number default 0, band_board_reg date default sysdate)
	</insert>
	
	<insert id="band_create_table_comment" parameterClass="int">
		create table t_band_board_comment_$band_id$(band_board_comment_writer varchar2(100), band_board_comment_comment varchar2(500), band_board_comment_reg date default sysdate)
	</insert>
	
	<insert id="band_create_table_member" parameterClass="int">
		create table t_band_member_$band_id$(band_member varchar2(100), band_member_img varchar2(300), band_member_level number, band_member_reg date default sysdate)
	</insert>
	
</sqlMap>